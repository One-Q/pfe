webpackJsonp([1],{"6WXX":function(e,t,n){t=e.exports=n("FZ+f")(void 0),t.push([e.i,"h2{color:#686b79}.problemContainer{margin-top:50px}.problemForm{margin:0 auto;width:500px}.problemForm form{min-width:100px;max-width:500px;width:100%}.problemForm .inputFW{width:100%}label{color:rgba(0,0,0,.54)}",""])},BbG6:function(e,t){e.exports='<div class="problemContainer">\n  <div class="problemForm">\n      <h2>Soumission de problème</h2>\n      <form [formGroup]="form" (ngSubmit)="submitForm()">\n        <p>\n          <mat-form-field class="inputFW">\n            <input matInput formControlName="User" placeholder="Adresse email">\n            <mat-error>This field is required</mat-error>\n          </mat-form-field>\n        </p>\n        <p>\n          <mat-form-field class="inputFW">\n            <input matInput value="{{machineName}}" placeholder="Nom de la machine" disabled>\n            <mat-error>Le nom de la machine est requis</mat-error>\n          </mat-form-field>\n        </p>\n        <p>\n          <mat-form-field class="inputFW">\n            <textarea matInput placeholder="Description du problème (max 200 caractères)" formControlName="Description" rows="3"></textarea>\n          </mat-form-field>\n        </p>\n        <p>\n          <label>Image (Optionnel)</label><br><br>\n          <input type="file" (change)="fileChange($event)" name="image" />\n        </p>\n        <button mat-raised-button color="primary">Envoyer</button>\n      </form>\n  </div>\n</div>'},CQ5b:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("TToO"),r=n("3j3K"),o=n("Fzro"),a=n("eJeA"),s=n.n(a),u=(function(){function e(e){this.http=e;var t=new o.b;t.append("Content-Type","application/json"),this.options=new o.c({headers:t})}return e.prototype.machineNameValid=function(e){return this.http.get(s()()+"pc/"+e)},e.prototype.createProblem=function(e){console.log("roman");var t=new FormData;return t.append("Name",e.Name),t.append("Description",e.Description),t.append("User",e.User),t.append("image",e.image),console.log(e.image),this.http.post(s()()+"problems",t)},e})();u=i.b([n.i(r.c)(),i.c("design:paramtypes",[o.d])],u)},Fno9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("jhC7");n.d(t,"ProblemsModule",(function(){return i.a}))},JS1S:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("TToO"),r=n("3j3K"),o=n("NVOs"),a=n("5oXY"),s=n("CQ5b"),u=(function(){function e(e,t,n,i){this.formBuilder=e,this.router=t,this.route=n,this.service=i,this.machine={},this.errorMessages={},this.image={}}return e.prototype.ngOnInit=function(){var e=this;this.sub=this.route.params.subscribe((function(t){e.machineName=t.machineName})),this.validateMachineName(),this.constructForm()},e.prototype.validateMachineName=function(){var e=this;this.service.machineNameValid(this.machineName).subscribe((function(t){var n=t.json();e.machine=n}),(function(t){t&&e.router.navigate(["**"])}))},e.prototype.constructForm=function(){this.form=this.formBuilder.group({User:["",[o.h.required,this.validateEmail]],Name:[this.machineName,[o.h.required]],Description:["",[o.h.required,this.validateDesc]]})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e.prototype.fileChange=function(e){var t=this,n=new FileReader;if(e.target.files&&e.target.files.length>0){var i=e.target.files[0];n.readAsDataURL(i),n.onload=function(){t.image={filename:i.name,filetype:i.type,value:n.result.split(",")[1]}}}},e.prototype.submitForm=function(){if(this.form.valid){var e=this.form.value;e.image=this.image,this.service.createProblem(e).subscribe((function(e){return console.log(e)}),(function(e){console.log(e)}))}else console.log("erreur")},e.prototype.validateEmail=function(e){return/^.{2,20}\..{2,20}@(student\.vinci\.be|vinci\.be)$/.test(e.value)?null:{validateEmail:{valid:!1}}},e.prototype.validateDesc=function(e){return/^.{3,200}$/.test(e.value)?null:{validateDesc:{valid:!1}}},e})();u=i.b([n.i(r._12)({template:n("BbG6"),styles:[n("OUAR")]}),i.c("design:paramtypes",[o.j,a.c,a.d,s.a])],u)},OUAR:function(e,t,n){var i=n("6WXX");e.exports="string"==typeof i?i:i.toString()},eJeA:function(e,t,n){"use strict";function i(){return"https://ipl-resolver.herokuapp.com/api/"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},jhC7:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("TToO"),r=n("2Je8"),o=n("NVOs"),a=n("3j3K"),s=n("5oXY"),u=n("Fzro"),m=n("lZzb"),c=n("JS1S"),l=n("qDvO"),p=n("CQ5b"),f=(function(){function e(){}return e})();f.routes=m.a,f=i.b([n.i(a.z)({declarations:[c.a],imports:[r.e,o.a,l.a,s.a.forChild(m.a),o.b,s.a,u.a],providers:[p.a]})],f)},lZzb:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("JS1S"),r=[{path:"",children:[{path:":machineName",component:i.a}]}]}});