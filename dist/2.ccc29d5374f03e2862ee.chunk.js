webpackJsonp([2],{"6WXX":function(e,t,n){t=e.exports=n("FZ+f")(void 0),t.push([e.i,"h2{color:#686b79}.problemContainer{margin-top:50px}.problemForm{margin:0 auto;max-width:500px}.problemForm .inputFW,.problemForm form{width:100%}label{color:rgba(0,0,0,.54)}",""])},BbG6:function(e,t){e.exports='<div class="problemContainer">\n  <div class="problemForm">\n      <h2>Soumission de problème</h2>\n      <h3 class="success">{{response}}</h3>\n      <form [formGroup]="form" (ngSubmit)="submitForm()" *ngIf="machineName">\n        <p>\n          <mat-form-field class="inputFW">\n            <input matInput formControlName="User" placeholder="Adresse email">\n            <mat-error>L\'adresse email est requise et doit être une adresse de Vinci</mat-error>\n          </mat-form-field>\n        </p>\n        <p>\n          <mat-form-field class="inputFW">\n            <input matInput value="{{machineName}}" placeholder="Nom de la machine" disabled>\n            <mat-error>Le nom de la machine est requis</mat-error>\n          </mat-form-field>\n        </p>\n        <p>\n          <mat-form-field class="inputFW">\n            <textarea matInput placeholder="Description du problème (max 200 caractères)" formControlName="Description" rows="3"></textarea>\n            <mat-error>La description est requise</mat-error>\n          </mat-form-field>\n        </p>\n        <p>\n          <label>Image (Optionnel)</label><br><br>\n          <input type="file" (change)="fileChange($event)" name="image" accept=".png, .jpg, .jpeg, .gif, .svg"/>\n        </p>\n        <button mat-raised-button color="primary">Envoyer</button>\n      </form>\n  </div>\n</div>'},CQ5b:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("TToO"),i=n("3j3K"),a=n("Fzro"),o=n("eJeA"),s=n.n(o),c=(function(){function e(e){this.http=e;var t=new a.b;t.append("Content-Type","application/json"),this.options=new a.c({headers:t})}return e.prototype.machineNameValid=function(e){return this.http.get(s()()+"pc/"+e)},e.prototype.createProblem=function(e){var t=new FormData;return t.append("Name",e.Name),t.append("Description",e.Description),t.append("User",e.User),t.append("image",e.image),this.http.post(s()()+"problems",t).map((function(e){return e.json()}))},e})();c=r.b([n.i(i.c)(),r.c("design:paramtypes",[a.d])],c)},Fno9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("jhC7");n.d(t,"ProblemsModule",(function(){return r.a}))},JS1S:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("TToO"),i=n("3j3K"),a=n("NVOs"),o=n("5oXY"),s=n("CQ5b"),c=n("DUFE"),u=(function(){function e(e,t,n,r,i){this.formBuilder=e,this.router=t,this.route=n,this.service=r,this.snackBar=i,this.machine={},this.errorMessages={},this.image={}}return e.prototype.ngOnInit=function(){var e=this;this.errorMessages={},this.sub=this.route.params.subscribe((function(t){e.machineName=t.machineName})),this.validateMachineName(),this.constructForm()},e.prototype.openSnackBar=function(e){this.snackBar.open(e,"",{duration:3e3})},e.prototype.validateMachineName=function(){var e=this;this.service.machineNameValid(this.machineName).subscribe((function(t){var n=t.json();e.machine=n}),(function(t){t&&e.router.navigate(["**"])}))},e.prototype.constructForm=function(){this.form=this.formBuilder.group({User:["",[a.h.required,this.validateEmail]],Name:[this.machineName,[a.h.required]],Description:["",[a.h.required,this.validateDesc]]})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e.prototype.fileChange=function(e){new FileReader;if(e.target.files&&e.target.files.length>0){var t=e.target.files[0];this.file=t}},e.prototype.submitForm=function(){var e=this;if(this.form.valid){var t=this.form.value;t.image=this.file,this.service.createProblem(t).subscribe((function(t){return e.openSnackBar("Votre demande a bien été enregistrée")}),(function(e){console.log(e)}))}else console.log("erreur")},e.prototype.validateEmail=function(e){return/^.{2,20}\..{2,20}@(student\.vinci\.be|vinci\.be)$/.test(e.value)?null:{validateEmail:{valid:!1}}},e.prototype.validateDesc=function(e){return/^.{3,200}$/.test(e.value)?null:{validateDesc:{valid:!1}}},e})();u=r.b([n.i(i._12)({template:n("BbG6"),styles:[n("OUAR")]}),r.c("design:paramtypes",[a.j,o.c,o.d,s.a,c.i])],u)},OUAR:function(e,t,n){var r=n("6WXX");e.exports="string"==typeof r?r:r.toString()},eJeA:function(e,t,n){"use strict";function r(){return"https://ipl-resolver.herokuapp.com/api/"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},jhC7:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("TToO"),i=n("2Je8"),a=n("NVOs"),o=n("3j3K"),s=n("5oXY"),c=n("Fzro"),u=n("lZzb"),p=n("JS1S"),m=n("qDvO"),l=n("CQ5b"),f=(function(){function e(){}return e})();f.routes=u.a,f=r.b([n.i(o.z)({declarations:[p.a],imports:[i.e,a.a,m.a,s.a.forChild(u.a),a.b,s.a,c.a],providers:[l.a]})],f)},lZzb:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("JS1S"),i=[{path:"",children:[{path:":machineName",component:r.a}]}]}});