webpackJsonp([0],{"6WXX":function(e,r,t){r=e.exports=t("FZ+f")(void 0),r.push([e.i,"h2{color:#686b79}.problemContainer{margin-top:50px}.problemForm{margin:0 auto;max-width:500px}.problemForm .inputFW,.problemForm form{width:100%}label{color:rgba(0,0,0,.54)}",""])},BbG6:function(e,r){e.exports='<div class="problemContainer">\r\n  <div class="problemForm">\r\n      <h2>Soumission de problème</h2>\r\n      <h3 class="success">{{response}}</h3>\r\n      <form [formGroup]="form" (ngSubmit)="submitForm()" *ngIf="machine">\r\n        <p>\r\n          <mat-form-field class="inputFW">\r\n            <input matInput formControlName="User" placeholder="Adresse email">\r\n            <mat-error>L\'adresse email est requise et doit être une adresse de Vinci</mat-error>\r\n          </mat-form-field>\r\n        </p>\r\n        <p>\r\n          <mat-form-field class="inputFW">\r\n            <input matInput value="{{machineName}}" placeholder="Nom de la machine" disabled>\r\n            <mat-error>Le nom de la machine est requis</mat-error>\r\n          </mat-form-field>\r\n        </p>\r\n        <p>\r\n          <mat-form-field class="inputFW">\r\n            <textarea matInput placeholder="Description du problème (max 200 caractères)" formControlName="Description" rows="3"></textarea>\r\n            <mat-error>La description est requise</mat-error>\r\n          </mat-form-field>\r\n        </p>\r\n        <p>\r\n          <label>Image (Optionnel)</label><br><br>\r\n          <input type="file" (change)="fileChange($event)" name="image" accept=".png, .jpg, .jpeg, .gif, .svg"/>\r\n        </p>\r\n        <button mat-raised-button color="primary">Envoyer</button>\r\n      </form>\r\n  </div>\r\n</div>'},CQ5b:function(e,r,t){"use strict";t.d(r,"a",(function(){return c}));var n=t("TToO"),i=t("3j3K"),a=t("Fzro"),o=t("eJeA"),s=t.n(o),c=(function(){function e(e){this.http=e;var r=new a.b;r.append("Content-Type","application/json"),this.options=new a.c({headers:r})}return e.prototype.machineNameValid=function(e){return this.http.get(s()()+"pc/"+e)},e.prototype.createProblem=function(e){var r=new FormData;return r.append("Name",e.Name),r.append("Description",e.Description),r.append("User",e.User),r.append("image",e.image),this.http.post(s()()+"problems",r)},e})();c=n.b([t.i(i.c)(),n.c("design:paramtypes",[a.d])],c)},Fno9:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("jhC7");t.d(r,"ProblemsModule",(function(){return n.a}))},JS1S:function(e,r,t){"use strict";t.d(r,"a",(function(){return m}));var n=t("TToO"),i=t("3j3K"),a=t("NVOs"),o=t("5oXY"),s=t("CQ5b"),c=t("DUFE"),m=(function(){function e(e,r,t,n,i){this.formBuilder=e,this.router=r,this.route=t,this.service=n,this.snackBar=i,this.machine={},this.errorMessages={},this.image={}}return e.prototype.ngOnInit=function(){var e=this;this.errorMessages={},this.sub=this.route.params.subscribe((function(r){e.machineName=r.machineName})),this.validateMachineName(),this.constructForm()},e.prototype.openSnackBar=function(e){this.snackBar.open(e,"",{duration:3e3})},e.prototype.validateMachineName=function(){var e=this;this.service.machineNameValid(this.machineName).subscribe((function(r){var t=r.json();e.machine=t}),(function(r){r&&e.router.navigate(["**"])}))},e.prototype.constructForm=function(){this.form=this.formBuilder.group({User:["",[a.i.required,this.validateEmail]],Name:[this.machineName,[a.i.required]],Description:["",[a.i.required,this.validateDesc]]})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e.prototype.fileChange=function(e){new FileReader;if(e.target.files&&e.target.files.length>0){var r=e.target.files[0];this.file=r}},e.prototype.submitForm=function(){var e=this;if(this.form.valid){var r=this.form.value;r.image=this.file,this.service.createProblem(r).subscribe((function(r){return e.openSnackBar("Votre demande a bien été enregistrée")}),(function(e){console.log(e)}))}else console.log("erreur")},e.prototype.validateEmail=function(e){return/^.{2,20}\..{2,20}@(student\.vinci\.be|vinci\.be)$/.test(e.value)?null:{validateEmail:{valid:!1}}},e.prototype.validateDesc=function(e){return/^.{3,200}$/.test(e.value)?null:{validateDesc:{valid:!1}}},e})();m=n.b([t.i(i._0)({template:t("BbG6"),styles:[t("OUAR")]}),n.c("design:paramtypes",[a.j,o.c,o.d,s.a,c.m])],m)},OUAR:function(e,r,t){var n=t("6WXX");e.exports="string"==typeof n?n:n.toString()},jhC7:function(e,r,t){"use strict";t.d(r,"a",(function(){return f}));var n=t("TToO"),i=t("2Je8"),a=t("NVOs"),o=t("3j3K"),s=t("5oXY"),c=t("Fzro"),m=t("lZzb"),p=t("JS1S"),u=t("qDvO"),l=t("CQ5b"),f=(function(){function e(){}return e})();f.routes=m.a,f=n.b([t.i(o.z)({declarations:[p.a],imports:[i.e,a.a,u.a,s.a.forChild(m.a),a.b,s.a,c.a],providers:[l.a]})],f)},lZzb:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var n=t("JS1S"),i=[{path:"",children:[{path:":machineName",component:n.a}]}]}});