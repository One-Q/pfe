webpackJsonp([1],{"6WXX":function(e,t,r){t=e.exports=r("FZ+f")(void 0),t.push([e.i,"h2{color:#686b79}.problemContainer{margin-top:50px}.problemForm{margin:0 auto;width:500px}.problemForm form{min-width:100px;max-width:500px;width:100%}.problemForm .inputFW{width:100%}label{color:rgba(0,0,0,.54)}",""])},BbG6:function(e,t){e.exports='<div class="problemContainer">\r\n  <div class="problemForm">\r\n      <h2>Soumission de problème</h2>\r\n      <form [formGroup]="form" (ngSubmit)="submitForm()">\r\n        <p>\r\n          <mat-form-field class="inputFW">\r\n            <input matInput formControlName="User" placeholder="Adresse email">\r\n            <mat-error>This field is required</mat-error>\r\n          </mat-form-field>\r\n        </p>\r\n        <p>\r\n          <mat-form-field class="inputFW">\r\n            <input matInput value="{{machineName}}" placeholder="Nom de la machine" disabled>\r\n            <mat-error>Le nom de la machine est requis</mat-error>\r\n          </mat-form-field>\r\n        </p>\r\n        <p>\r\n          <mat-form-field class="inputFW">\r\n            <textarea matInput placeholder="Description du problème (max 200 caractères)" formControlName="Description" rows="3"></textarea>\r\n          </mat-form-field>\r\n        </p>\r\n        <p>\r\n          <label>Image (Optionnel)</label><br><br>\r\n          <input type="file" (change)="fileChange($event)" name="image" />\r\n        </p>\r\n        <button mat-raised-button color="primary">Envoyer</button>\r\n      </form>\r\n  </div>\r\n</div>'},CQ5b:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("TToO"),i=r("3j3K"),o=r("Fzro"),a=r("eJeA"),s=r.n(a),l=(function(){function e(e){this.http=e;var t=new o.b;t.append("Content-Type","application/json"),this.options=new o.c({headers:t})}return e.prototype.machineNameValid=function(e){return this.http.get(s()()+"pc/"+e)},e.prototype.createProblem=function(e){console.log("roman");var t=new FormData;return t.append("Name",e.Name),t.append("Description",e.Description),t.append("User",e.User),t.append("image",e.image,e.image.name),console.log(e.image),this.http.post(s()()+"problems",t)},e})();l=n.b([r.i(i.c)(),n.c("design:paramtypes",[o.d])],l)},Fno9:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("jhC7");r.d(t,"ProblemsModule",(function(){return n.a}))},JS1S:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("TToO"),i=r("3j3K"),o=r("NVOs"),a=r("5oXY"),s=r("CQ5b"),l=(function(){function e(e,t,r,n){this.formBuilder=e,this.router=t,this.route=r,this.service=n,this.machine={},this.errorMessages={},this.image={}}return e.prototype.ngOnInit=function(){var e=this;this.sub=this.route.params.subscribe((function(t){e.machineName=t.machineName})),this.validateMachineName(),this.constructForm()},e.prototype.validateMachineName=function(){var e=this;this.service.machineNameValid(this.machineName).subscribe((function(t){var r=t.json();e.machine=r}),(function(t){t&&e.router.navigate(["**"])}))},e.prototype.constructForm=function(){this.form=this.formBuilder.group({User:["",[o.h.required,this.validateEmail]],Name:[this.machineName,[o.h.required]],Description:["",[o.h.required,this.validateDesc]]})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e.prototype.fileChange=function(e){var t=this,r=new FileReader;if(e.target.files&&e.target.files.length>0){var n=e.target.files[0];this.file=n,console.log(this.file),r.readAsDataURL(n),r.onload=function(){t.image={filename:n.name,filetype:n.type,value:r.result.split(",")[1]}}}},e.prototype.submitForm=function(){if(this.form.valid){var e=this.form.value;e.image=this.file,this.service.createProblem(e).subscribe((function(e){return console.log(e)}),(function(e){console.log(e)}))}else console.log("erreur")},e.prototype.validateEmail=function(e){return/^.{2,20}\..{2,20}@(student\.vinci\.be|vinci\.be)$/.test(e.value)?null:{validateEmail:{valid:!1}}},e.prototype.validateDesc=function(e){return/^.{3,200}$/.test(e.value)?null:{validateDesc:{valid:!1}}},e})();l=n.b([r.i(i._12)({template:r("BbG6"),styles:[r("OUAR")]}),n.c("design:paramtypes",[o.j,a.c,a.d,s.a])],l)},OUAR:function(e,t,r){var n=r("6WXX");e.exports="string"==typeof n?n:n.toString()},eJeA:function(e,t,r){"use strict";function n(){return"https://ipl-resolver.herokuapp.com/api/"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},jhC7:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r("TToO"),i=r("2Je8"),o=r("NVOs"),a=r("3j3K"),s=r("5oXY"),l=r("Fzro"),m=r("lZzb"),u=r("JS1S"),c=r("qDvO"),p=r("CQ5b"),f=(function(){function e(){}return e})();f.routes=m.a,f=n.b([r.i(a.z)({declarations:[u.a],imports:[i.e,o.a,c.a,s.a.forChild(m.a),o.b,s.a,l.a],providers:[p.a]})],f)},lZzb:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("JS1S"),i=[{path:"",children:[{path:":machineName",component:n.a}]}]}});